(function(){"use strict";var e={7042:function(e,t,a){var r=a(9242),s=a(3396);function i(e,t,a,i,o,l){const n=(0,s.up)("the-header"),c=(0,s.up)("router-view"),d=(0,s.up)("the-footer");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(n),(0,s.Wm)(c,null,{default:(0,s.w5)((({Component:e})=>[(0,s.Wm)(r.uT,{name:"route",mode:"out-in"},{default:(0,s.w5)((()=>[((0,s.wg)(),(0,s.j4)((0,s.LL)(e)))])),_:2},1024)])),_:1}),(0,s.Wm)(d)],64)}var o=a(65);const l={class:"header container"},n={class:"header__wrapper"},c=(0,s._)("span",{class:"header__info"},"Каталог",-1),d=(0,s._)("img",{src:"img/svg/logo-moire.svg",alt:"Логотип интернет магазина Moire",width:"116",height:"34"},null,-1),u=(0,s._)("a",{class:"header__tel",href:"tel:8 800 600 90 09"}," 8 800 600 90 09 ",-1);function _(e,t,a,r,i,o){const _=(0,s.up)("router-link"),m=(0,s.up)("cart-logo");return(0,s.wg)(),(0,s.iD)("header",l,[(0,s._)("div",n,[c,(0,s.Wm)(_,{class:"header__logo",to:{name:"main"}},{default:(0,s.w5)((()=>[d])),_:1}),u,(0,s.Wm)(m)])])}var m=a(7139);const p=(0,s._)("svg",{width:"19",height:"24"},[(0,s._)("use",{"xlink:href":"#icon-cart"})],-1),g={key:0,class:"header__count","aria-label":"Количество товаров"},h={key:1,class:"header__count","aria-label":"Количество товаров"},f={key:2,class:"header__count","aria-label":"Количество товаров"};function y(e,t,a,r,i,o){const l=(0,s.up)("router-link");return(0,s.wg)(),(0,s.j4)(l,{class:"header__cart","aria-label":"Корзина с товарами",to:{name:"cart"}},{default:(0,s.w5)((()=>[p,e.$store.state.isCartLoading?((0,s.wg)(),(0,s.iD)("span",g,"...")):e.$store.state.isCartLoadingFailed?((0,s.wg)(),(0,s.iD)("span",h,"!")):((0,s.wg)(),(0,s.iD)("span",f,(0,m.zw)(e.$store.state.cartData.length),1))])),_:1})}var b={},v=a(89);const w=(0,v.Z)(b,[["render",y]]);var k=w,I={components:{CartLogo:k}};const D=(0,v.Z)(I,[["render",_]]);var C=D;const F={class:"footer container"},P=(0,s.uE)('<div class="footer__wrapper"><ul class="footer__links"><li><a class="footer__link" href="#"> Каталог </a></li><li><a class="footer__link" href="tel:88006009009"> 8 800 600 90 09 </a></li><li><a class="footer__link" href="mailto:hi@technozavrrr.com"> hi@technozavrrr.com </a></li><li><a class="footer__link" href="#"> Распродажа </a></li><li><a class="footer__link footer__link--medium" href="#"> Заказать звонок </a></li></ul><ul class="footer__social social"><li class="social__item"><a class="social__link" href="#" aria-label="Вконтакте"><svg width="20" height="11" fill="currentColor"><use xlink:href="#icon-vk"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Инстаграм"><svg width="17" height="17" fill="currentColor"><use xlink:href="#icon-insta"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Facebook"><svg width="17" height="17" fill="currentColor"><use xlink:href="#icon-facebook"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Twitter"><svg width="17" height="14" fill="currentColor"><use xlink:href="#icon-twitter"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Telegram"><svg width="19" height="17" fill="currentColor"><use xlink:href="#icon-telegram"></use></svg></a></li></ul><p class="footer__desc"> Все права на материалы, находящиеся на сайте, охраняются в соответствии с законодательством РФ, в том числе об авторском праве и смежных правах. </p><ul class="footer__data"><li><a class="footer__link" href="#" target="_blank" rel="noopener" type="application/pdf"> Политика конфиденциальности </a></li><li><a class="footer__link" href="#" target="_blank" rel="noopener" type="application/pdf"> Публичная оферта </a></li></ul><span class="footer__copyright"> © 2022 Moire </span></div>',1),$=[P];function L(e,t){return(0,s.wg)(),(0,s.iD)("footer",F,$)}const A={},z=(0,v.Z)(A,[["render",L]]);var S=z,T={components:{TheHeader:C,TheFooter:S},created(){const e=localStorage.getItem("userAccessKey");e&&this.updateAccessKey(e),this.loadCart()},methods:{...(0,o.nv)(["loadCart"]),...(0,o.OI)(["updateAccessKey"])}};const V=(0,v.Z)(T,[["render",i]]);var x=V,U=a(678);const E={class:"content container"},M={class:"content__top"},K={class:"content__row"},O=(0,s._)("h1",{class:"content__title"}," Каталог ",-1),W={class:"content__info"},q={class:"content__catalog"},j={class:"catalog"},Z={key:0,class:"loader-wrapper"},H={key:1},Y={key:2};function B(e,t,a,r,i,o){const l=(0,s.up)("products-filter"),n=(0,s.up)("base-loader"),c=(0,s.up)("products-list"),d=(0,s.up)("base-pagination");return(0,s.wg)(),(0,s.iD)("main",E,[(0,s._)("div",M,[(0,s._)("div",K,[O,(0,s._)("span",W," Количество товаров: "+(0,m.zw)(o.total),1)])]),(0,s._)("div",q,[(0,s.Wm)(l,{filters:i.filters,onChangeFilters:o.setFilters},null,8,["filters","onChangeFilters"]),(0,s._)("section",j,[o.isLoading?((0,s.wg)(),(0,s.iD)("div",Z,[(0,s.Wm)(n)])):o.isLoadingFailed?((0,s.wg)(),(0,s.iD)("h2",H,"Возникла ошибка при загрузке товаров. Попробуйте позже.")):o.products.length?((0,s.wg)(),(0,s.j4)(c,{key:3,products:o.products},null,8,["products"])):((0,s.wg)(),(0,s.iD)("h2",Y,"Нет товаров по вашему запросу. Попробуйте поискать что-нибудь другое!")),o.products.length?((0,s.wg)(),(0,s.j4)(d,{key:4,page:i.page,perPage:i.productsPerPage,total:o.total,onChangePage:o.setPage},null,8,["page","perPage","total","onChangePage"])):(0,s.kq)("",!0)])])])}const Q={key:0,class:"filter"},R={class:"loader-wrapper"},G={key:1,class:"filter"},N=(0,s._)("h2",null,"Произошла ошибка при загрузке фильтров! Попробуйте перезагрузить страницу.",-1),J=[N],X={key:2,class:"filter"},ee={class:"form__block"},te=(0,s._)("legend",{class:"form__legend"},"Цена",-1),ae={class:"form__label form__label--price"},re=(0,s._)("span",{class:"form__value"},"От",-1),se={class:"form__label form__label--price"},ie=(0,s._)("span",{class:"form__value"},"До",-1),oe={class:"form__block"},le=(0,s._)("legend",{class:"form__legend"},"Категория",-1),ne={class:"form__label form__label--select"},ce=(0,s._)("option",{value:"0"},"Все категории",-1),de=["value"],ue={class:"form__block"},_e=(0,s._)("legend",{class:"form__legend"},"Цвет",-1),me={class:"colors colors--black"},pe={class:"colors__label"},ge=["value"],he={class:"form__block"},fe=(0,s._)("legend",{class:"form__legend"},"Материал",-1),ye={class:"check-list"},be={class:"check-list__label"},ve=["value"],we={class:"check-list__desc"},ke={class:"form__block"},Ie=(0,s._)("legend",{class:"form__legend"},"Коллекция",-1),De={class:"check-list"},Ce={class:"check-list__label"},Fe=["value"],Pe={class:"check-list__desc"},$e=(0,s._)("button",{class:"filter__submit button button--primery",type:"submit"}," Применить ",-1);function Le(e,t,a,i,o,l){const n=(0,s.up)("base-loader");return l.isLoading?((0,s.wg)(),(0,s.iD)("aside",Q,[(0,s._)("div",R,[(0,s.Wm)(n)])])):l.isLoadingFailed?((0,s.wg)(),(0,s.iD)("aside",G,J)):((0,s.wg)(),(0,s.iD)("aside",X,[(0,s._)("form",{class:"filter__form form",action:"#",method:"get",onSubmit:t[7]||(t[7]=(0,r.iM)(((...e)=>l.setFilters&&l.setFilters(...e)),["prevent"]))},[(0,s._)("fieldset",ee,[te,(0,s._)("label",ae,[(0,s.wy)((0,s._)("input",{class:"form__input",type:"text",name:"min-price","onUpdate:modelValue":t[0]||(t[0]=e=>o.currentPriceFrom=e)},null,512),[[r.nr,o.currentPriceFrom,void 0,{number:!0}]]),re]),(0,s._)("label",se,[(0,s.wy)((0,s._)("input",{class:"form__input",type:"text",name:"max-price","onUpdate:modelValue":t[1]||(t[1]=e=>o.currentPriceTo=e)},null,512),[[r.nr,o.currentPriceTo,void 0,{number:!0}]]),ie])]),(0,s._)("fieldset",oe,[le,(0,s._)("label",ne,[(0,s.wy)((0,s._)("select",{class:"form__select",type:"text",name:"category","onUpdate:modelValue":t[2]||(t[2]=e=>o.currentCategoryId=e)},[ce,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.categories,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e.id,value:e.id},(0,m.zw)(e.title),9,de)))),128))],512),[[r.bM,o.currentCategoryId]])])]),(0,s._)("fieldset",ue,[_e,(0,s._)("ul",me,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.colors,(e=>((0,s.wg)(),(0,s.iD)("li",{class:"colors__item",key:e.id},[(0,s._)("label",pe,[(0,s.wy)((0,s._)("input",{class:"colors__radio sr-only",type:"checkbox",name:"color",value:e.id,"onUpdate:modelValue":t[3]||(t[3]=e=>o.currentColorId=e)},null,8,ge),[[r.e8,o.currentColorId]]),(0,s._)("span",{class:"colors__value",style:(0,m.j5)({"background-color":e.code})},null,4)])])))),128))])]),(0,s._)("fieldset",he,[fe,(0,s._)("ul",ye,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.materials,(e=>((0,s.wg)(),(0,s.iD)("li",{class:"check-list__item",key:e.id},[(0,s._)("label",be,[(0,s.wy)((0,s._)("input",{class:"check-list__check sr-only",type:"checkbox",name:"material",value:e.id,"onUpdate:modelValue":t[4]||(t[4]=e=>o.currentMaterialId=e)},null,8,ve),[[r.e8,o.currentMaterialId]]),(0,s._)("span",we,[(0,s.Uk)((0,m.zw)(e.title)+" ",1),(0,s._)("span",null,"("+(0,m.zw)(e.productsCount)+")",1)])])])))),128))])]),(0,s._)("fieldset",ke,[Ie,(0,s._)("ul",De,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.seasons,(e=>((0,s.wg)(),(0,s.iD)("li",{class:"check-list__item",key:e.id},[(0,s._)("label",Ce,[(0,s.wy)((0,s._)("input",{class:"check-list__check sr-only",type:"checkbox",name:"collection",value:e.id,"onUpdate:modelValue":t[5]||(t[5]=e=>o.currentSeasonId=e)},null,8,Fe),[[r.e8,o.currentSeasonId]]),(0,s._)("span",Pe,[(0,s.Uk)((0,m.zw)(e.title)+" ",1),(0,s._)("span",null,"("+(0,m.zw)(e.productsCount)+")",1)])])])))),128))])]),$e,l.isResetBtnVisible?((0,s.wg)(),(0,s.iD)("button",{key:0,class:"filter__reset button button--second",type:"button",onClick:t[6]||(t[6]=(...e)=>l.resetFilters&&l.resetFilters(...e))}," Сбросить ")):(0,s.kq)("",!0)],32)]))}var Ae={emits:["change-filters"],props:["filters"],data(){return{currentPriceFrom:this.filters.filterPriceFrom,currentPriceTo:this.filters.filterPriceTo,currentCategoryId:this.filters.filterCategoryId,currentColorId:this.filters.filterColorId,currentMaterialId:this.filters.filterMaterialId,currentSeasonId:this.filters.filterSeasonId}},computed:{colors(){return this.$store.state.colorsData},materials(){return this.$store.state.materialsData},seasons(){return this.$store.state.seasonsData},categories(){return this.$store.state.categoriesData},productFilters(){return{filterPriceFrom:this.currentPriceFrom,filterPriceTo:this.currentPriceTo,filterCategoryId:this.currentCategoryId,filterColorId:this.currentColorId,filterMaterialId:this.currentMaterialId,filterSeasonId:this.currentSeasonId}},isLoading(){return this.$store.state.areFiltersLoading},isLoadingFailed(){return this.$store.state.areFiltersLoadingFailed},isResetBtnVisible(){return Object.values(this.filters).some((e=>void 0!==e.length?e.length:e))}},methods:{async loadFilters(){this.$store.dispatch("loadFilters")},setFilters(){this.$emit("change-filters",this.productFilters)},resetFilters(){this.currentPriceFrom=0,this.currentPriceTo=0,this.currentCategoryId=0,this.currentColorId=[],this.currentMaterialId=[],this.currentSeasonId=[],this.$router.replace({query:null}),this.setFilters()}},created(){this.$store.dispatch("loadFilters")}};const ze=(0,v.Z)(Ae,[["render",Le]]);var Se=ze;const Te={class:"catalog__list"};function Ve(e,t,a,r,i,o){const l=(0,s.up)("products-item");return(0,s.wg)(),(0,s.iD)("ul",Te,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.products,(e=>((0,s.wg)(),(0,s.j4)(l,{key:e.id,id:e.id,title:e.title,price:e.price,colors:e.colors,images:e.images},null,8,["id","title","price","colors","images"])))),128))])}const xe={class:"catalog__item"},Ue=["src","alt"],Ee={class:"catalog__title"},Me={class:"catalog__price"},Ke={class:"colors colors--black"},Oe=["onClick"],We=["name","value","checked"];function qe(e,t,a,i,o,l){const n=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("li",xe,[(0,s.Wm)(n,{class:"catalog__pic",to:{name:"product",params:{id:a.id}}},{default:(0,s.w5)((()=>[(0,s._)("img",{src:a.images[o.activeImgIdx].file.url,alt:a.title},null,8,Ue)])),_:1},8,["to"]),(0,s._)("h3",Ee,[(0,s.Wm)(n,{to:{name:"product",params:{id:a.id}}},{default:(0,s.w5)((()=>[(0,s.Uk)((0,m.zw)(a.title),1)])),_:1},8,["to"])]),(0,s._)("span",Me,(0,m.zw)(a.price)+" ₽ ",1),(0,s._)("ul",Ke,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.colors,(e=>((0,s.wg)(),(0,s.iD)("li",{class:"colors__item",key:e.id},[(0,s._)("label",{class:"colors__label",onClick:(0,r.iM)((t=>l.changeImg(e.id)),["prevent"])},[(0,s._)("input",{class:"colors__radio sr-only",type:"radio",name:"color-"+a.id,value:e.color.code,checked:e.id===l.activeImgId},null,8,We),(0,s._)("span",{class:"colors__value",style:(0,m.j5)({"background-color":e.color.code})},null,4)],8,Oe)])))),128))])])}var je={props:["id","title","price","colors","images"],data(){return{activeImgIdx:0}},computed:{activeImgId(){return this.colors[this.activeImgIdx].id}},methods:{changeImg(e){const t=this.colors.findIndex((t=>t.id===e));this.activeImgIdx=t}}};const Ze=(0,v.Z)(je,[["render",qe]]);var He=Ze,Ye={components:{ProductsItem:He},props:["products"]};const Be=(0,v.Z)(Ye,[["render",Ve]]);var Qe=Be;const Re={class:"catalog__pagination pagination"},Ge={class:"pagination__item"},Ne=(0,s._)("svg",{width:"8",height:"14",fill:"currentColor"},[(0,s._)("use",{"xlink:href":"#icon-arrow-left"})],-1),Je=[Ne],Xe=["onClick"],et={class:"pagination__item"},tt=(0,s._)("svg",{width:"8",height:"14",fill:"currentColor"},[(0,s._)("use",{"xlink:href":"#icon-arrow-right"})],-1),at=[tt];function rt(e,t,a,r,i,o){return(0,s.wg)(),(0,s.iD)("ul",Re,[(0,s._)("li",Ge,[(0,s._)("a",{class:(0,m.C_)(["pagination__link pagination__link--arrow",{"pagination__link--disabled":1===a.page}]),"aria-label":"Предыдущая страница",onClick:t[0]||(t[0]=e=>o.paginate(a.page-1))},Je,2)]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.pagesTotal,(e=>((0,s.wg)(),(0,s.iD)("li",{class:"pagination__item",key:e},[(0,s._)("a",{class:(0,m.C_)(["pagination__link",{"pagination__link--current":a.page===e}]),onClick:t=>o.paginate(e)},(0,m.zw)(e),11,Xe)])))),128)),(0,s._)("li",et,[(0,s._)("a",{class:(0,m.C_)(["pagination__link pagination__link--arrow",{"pagination__link--disabled":a.page===o.pagesTotal}]),href:"#","aria-label":"Следующая страница",onClick:t[1]||(t[1]=e=>o.paginate(a.page+1))},at,2)])])}var st={emits:["changePage"],props:["page","perPage","total"],computed:{pagesTotal(){return Math.ceil(this.total/this.perPage)}},methods:{paginate(e){e>0&&e<=this.pagesTotal&&this.$emit("changePage",e)}}};const it=(0,v.Z)(st,[["render",rt]]);var ot=it,lt={components:{ProductsFilter:Se,ProductsList:Qe,BasePagination:ot},data(){return{page:1,productsPerPage:12,filters:{filterPriceFrom:0,filterPriceTo:0,filterCategoryId:0,filterColorId:[],filterMaterialId:[],filterSeasonId:[]}}},computed:{productsData(){return this.$store.state.productsData},products(){return this.productsData?this.productsData.items.map((e=>({...e,images:e.colors.flatMap((e=>e.gallery)).filter((e=>null!==e))}))):[]},total(){return this.productsData?this.productsData.pagination.total:0},isLoading(){return this.$store.state.isLoading},isLoadingFailed(){return this.$store.state.isLoadingFailed}},methods:{loadProducts(){this.$store.dispatch("loadProducts",{page:this.page,limit:this.productsPerPage,minPrice:this.filters.filterPriceFrom,maxPrice:this.filters.filterPriceTo,categoryId:this.filters.filterCategoryId,materialIds:this.filters.filterMaterialId,seasonIds:this.filters.filterSeasonId,colorIds:this.filters.filterColorId})},setFilters(e){this.filters=e},setPage(e){this.page=e}},watch:{filters(){this.page=1,this.loadProducts()},page(){this.loadProducts()},$route(){this.loadProducts()}},created(){this.filters.filterCategoryId=this.$route.query.categoryId||0,this.loadProducts()}};const nt=(0,v.Z)(lt,[["render",B]]);var ct=nt;const dt={key:0,class:"content container"},ut={class:"loader-wrapper"},_t={key:1,class:"content container"},mt=(0,s._)("h1",null,"Произошла ошибка при загрузке корзины. Попробуйте ещё раз!",-1),pt=[mt],gt={key:2,class:"content container"},ht={class:"content__top"},ft={class:"breadcrumbs"},yt={class:"breadcrumbs__item"},bt=(0,s.Uk)(" Каталог "),vt=(0,s._)("li",{class:"breadcrumbs__item"},[(0,s._)("a",{class:"breadcrumbs__link"}," Корзина ")],-1),wt={class:"content__row"},kt=(0,s._)("h1",{class:"content__title"}," Корзина ",-1),It={class:"content__info"},Dt={class:"cart"},Ct={class:"cart__form form",action:"#",method:"POST"},Ft={class:"cart__field"},Pt={class:"cart__list"},$t={class:"cart__block"},Lt=(0,s._)("p",{class:"cart__desc"}," Мы посчитаем стоимость доставки на следующем этапе ",-1),At={class:"cart__price"},zt=(0,s.Uk)(" Итого: "),St=(0,s.Uk)(" Оформить заказ ");function Tt(e,t,a,r,i,o){const l=(0,s.up)("base-loader"),n=(0,s.up)("router-link"),c=(0,s.up)("cart-item");return o.isLoading?((0,s.wg)(),(0,s.iD)("main",dt,[(0,s._)("div",ut,[(0,s.Wm)(l)])])):o.isLoadingFailed?((0,s.wg)(),(0,s.iD)("main",_t,pt)):((0,s.wg)(),(0,s.iD)("main",gt,[(0,s._)("div",ht,[(0,s._)("ul",ft,[(0,s._)("li",yt,[(0,s.Wm)(n,{class:"breadcrumbs__link",to:{name:"main"}},{default:(0,s.w5)((()=>[bt])),_:1})]),vt]),(0,s._)("div",wt,[kt,(0,s._)("span",It," Количество товаров: "+(0,m.zw)(o.totalQuantity),1)])]),(0,s._)("section",Dt,[(0,s._)("form",Ct,[(0,s._)("div",Ft,[(0,s._)("ul",Pt,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.cart,(e=>((0,s.wg)(),(0,s.j4)(c,{key:e.id,title:e.product.title,img:e.color.gallery[0].file.url,"basket-item-id":e.id,"item-id":e.product.id,"color-code":e.color.color.code,"color-title":e.color.color.title,price:e.product.price,amount:e.quantity},null,8,["title","img","basket-item-id","item-id","color-code","color-title","price","amount"])))),128))])]),(0,s._)("div",$t,[Lt,(0,s._)("p",At,[zt,(0,s._)("span",null,(0,m.zw)(o.totalPrice)+" ₽",1)]),o.cart.length?((0,s.wg)(),(0,s.j4)(n,{key:0,class:"cart__button button button--primery",type:"submit",to:{name:"order"}},{default:(0,s.w5)((()=>[St])),_:1})):(0,s.kq)("",!0)])])])]))}const Vt={class:"cart__item product"},xt={class:"product__pic"},Ut=["src","alt"],Et={class:"product__title"},Mt={class:"product__info product__info--color"},Kt=(0,s.Uk)(" Цвет: "),Ot={class:"product__code"},Wt={class:"product__price"},qt={class:"product__status"},jt={key:0,class:"product__error"},Zt=(0,s._)("svg",{width:"20",height:"20",fill:"currentColor"},[(0,s._)("use",{"xlink:href":"#icon-close"})],-1),Ht=[Zt];function Yt(e,t,a,i,o,l){const n=(0,s.up)("base-item-counter");return(0,s.wg)(),(0,s.iD)("li",Vt,[(0,s._)("div",xt,[(0,s._)("img",{src:a.img,width:"120",height:"120",alt:a.title},null,8,Ut)]),(0,s._)("h3",Et,(0,m.zw)(a.title),1),(0,s._)("p",Mt,[Kt,(0,s._)("span",null,[(0,s._)("i",{style:(0,m.j5)({"background-color":a.colorCode})},null,4),(0,s.Uk)(" "+(0,m.zw)(a.colorTitle),1)])]),(0,s._)("span",Ot," Артикул: "+(0,m.zw)(a.itemId),1),(0,s.Wm)(n,{modelValue:l.productAmount,"onUpdate:modelValue":t[0]||(t[0]=e=>l.productAmount=e),itemAmount:a.amount,onChangeItemAmount:l.setItemAmount},null,8,["modelValue","itemAmount","onChangeItemAmount"]),(0,s._)("b",Wt,(0,m.zw)(a.price*l.productAmount)+" ₽ ",1),(0,s._)("div",qt,[o.isSendingFailed?((0,s.wg)(),(0,s.iD)("span",jt,"Что-то пошло не так. Попробуйте позже!")):(0,s.kq)("",!0)]),(0,s._)("button",{class:"product__del button-del",type:"button","aria-label":"Удалить товар из корзины",onClick:t[1]||(t[1]=(0,r.iM)(((...e)=>l.deleteItem&&l.deleteItem(...e)),["prevent"]))},Ht)])}var Bt=a(6265),Qt=a.n(Bt);const Rt="https://vue-moire.skillbox.cc/api",Gt=["disabled"],Nt=(0,s._)("svg",{width:"12",height:"12",fill:"currentColor"},[(0,s._)("use",{"xlink:href":"#icon-minus"})],-1),Jt=[Nt],Xt=(0,s._)("svg",{width:"12",height:"12",fill:"currentColor"},[(0,s._)("use",{"xlink:href":"#icon-plus"})],-1),ea=[Xt];function ta(e,t,a,i,o,l){return(0,s.wg)(),(0,s.iD)("div",{class:(0,m.C_)(["form__counter",{product__counter:"cart"===e.$route.name}])},[(0,s._)("button",{type:"button","aria-label":"Убрать один товар",disabled:1===a.itemAmount,onClick:t[0]||(t[0]=e=>l.changeItemAmount(a.itemAmount-1))},Jt,8,Gt),(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>l.itemAmountVal=e),name:"count"},null,512),[[r.nr,l.itemAmountVal,void 0,{number:!0}]]),(0,s._)("button",{type:"button","aria-label":"Добавить один товар",onClick:t[2]||(t[2]=e=>l.changeItemAmount(a.itemAmount+1))},ea)],2)}var aa={props:["itemAmount"],emits:["changeItemAmount"],computed:{itemAmountVal:{get(){return this.itemAmount},set(e){e&&this.$emit("changeItemAmount",e)}}},methods:{changeItemAmount(e){e>=1&&this.$emit("changeItemAmount",e)}}};const ra=(0,v.Z)(aa,[["render",ta]]);var sa=ra,ia={components:{BaseItemCounter:sa},props:["title","img","basketItemId","itemId","colorCode","colorTitle","price","amount"],data(){return{isSending:!1,isSendingFailed:!1}},computed:{productAmount:{get(){return this.amount},async set(e){this.isSendingFailed=!1,this.$store.commit("updateCartProductQuantity",{productId:this.itemId,quantity:e});try{const{data:t}=await Qt().put(`${Rt}/baskets/products`,{basketItemId:this.basketItemId,quantity:e},{params:{userAccessKey:this.$store.state.userAccessKey}});this.$store.commit("updateCart",t.items)}catch(t){this.isSendingFailed=!0,this.$store.commit("syncCartProducts")}}}},methods:{setItemAmount(e){this.productAmount=e},deleteItem(){this.$store.dispatch("deleteFromCart",{basketItemId:this.basketItemId,productId:this.itemId})}}};const oa=(0,v.Z)(ia,[["render",Yt]]);var la=oa,na={components:{CartItem:la},computed:{isLoading(){return this.$store.state.isCartLoading},isLoadingFailed(){return this.$store.state.isCartLoadingFailed},cart(){return this.$store.getters.cart},totalPrice(){return this.$store.getters.cartTotalPrice},totalQuantity(){return this.$store.getters.cartTotalQuantity},error(){return this.$store.state.cartError}}};const ca=(0,v.Z)(na,[["render",Tt]]);var da=ca;const ua={key:0,class:"content container"},_a={class:"loader-wrapper"},ma={key:1,class:"content container"},pa=(0,s._)("h1",null,"Проиошла ошибка при загрузке товара. Пожалуйста, попробуйте зайти сюда позже.",-1),ga=[pa],ha={key:2,class:"content container"},fa={class:"content__top"},ya={class:"breadcrumbs"},ba={class:"breadcrumbs__item"},va=(0,s.Uk)(" Каталог "),wa={class:"breadcrumbs__item"},ka={class:"breadcrumbs__item"},Ia={class:"breadcrumbs__link"},Da={class:"item"},Ca={class:"item__pics pics"},Fa={class:"pics__wrapper"},Pa=["src","alt"],$a={class:"pics__list"},La=["onClick"],Aa=["src","alt"],za={class:"item__info"},Sa={class:"item__code"},Ta={class:"item__title"},Va={class:"item__form"},xa={class:"form",action:"#",method:"POST"},Ua={class:"item__row item__row--center"},Ea={class:"item__price"},Ma={class:"item__row"},Ka={class:"form__block"},Oa=(0,s._)("legend",{class:"form__legend"},"Цвет",-1),Wa={class:"colors colors--black"},qa={class:"colors__label"},ja=["value","checked"],Za={class:"form__block"},Ha=(0,s._)("legend",{class:"form__legend"},"Размер",-1),Ya={class:"form__label form__label--small form__label--select"},Ba=["value"],Qa=["disabled"],Ra={key:0},Ga={key:1},Na={key:2},Ja={class:"item__desc"},Xa={class:"tabs"},er={class:"tabs__item"},tr={class:"tabs__item"};function ar(e,t,a,i,o,l){const n=(0,s.up)("base-loader"),c=(0,s.up)("router-link"),d=(0,s.up)("base-item-counter");return o.isLoading?((0,s.wg)(),(0,s.iD)("main",ua,[(0,s._)("div",_a,[(0,s.Wm)(n)])])):o.isLoadingFailed?((0,s.wg)(),(0,s.iD)("main",ma,ga)):((0,s.wg)(),(0,s.iD)("main",ha,[(0,s._)("div",fa,[(0,s._)("ul",ya,[(0,s._)("li",ba,[(0,s.Wm)(c,{class:"breadcrumbs__link",to:{name:"main"}},{default:(0,s.w5)((()=>[va])),_:1})]),(0,s._)("li",wa,[(0,s.Wm)(c,{class:"breadcrumbs__link",to:{name:"main",query:{categoryId:l.product.category.id}}},{default:(0,s.w5)((()=>[(0,s.Uk)((0,m.zw)(l.product.category.title),1)])),_:1},8,["to"])]),(0,s._)("li",ka,[(0,s._)("a",Ia,(0,m.zw)(l.product.title),1)])])]),(0,s._)("section",Da,[(0,s._)("div",Ca,[(0,s._)("div",Fa,[(0,s._)("img",{width:"570",height:"570",src:l.gallery[o.activeColorIdx].image,alt:l.product.title},null,8,Pa)]),(0,s._)("ul",$a,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.gallery,(e=>((0,s.wg)(),(0,s.iD)("li",{class:"pics__item",key:e.id},[(0,s._)("a",{href:"",class:(0,m.C_)(["pics__link",{"pics__link--current":e.id===l.activeColorId}]),onClick:(0,r.iM)((t=>l.changeImg(e.id)),["prevent"])},[(0,s._)("img",{width:"98",height:"98",src:e.image,alt:l.product.title},null,8,Aa)],10,La)])))),128))])]),(0,s._)("div",za,[(0,s._)("span",Sa,"Артикул: "+(0,m.zw)(l.product.id),1),(0,s._)("h2",Ta,(0,m.zw)(l.product.title),1),(0,s._)("div",Va,[(0,s._)("form",xa,[(0,s._)("div",Ua,[(0,s.Wm)(d,{modelValue:o.productAmount,"onUpdate:modelValue":t[0]||(t[0]=e=>o.productAmount=e),itemAmount:o.productAmount,onChangeItemAmount:l.setItemAmount},null,8,["modelValue","itemAmount","onChangeItemAmount"]),(0,s._)("b",Ea,(0,m.zw)(l.product.price)+" ₽ ",1)]),(0,s._)("div",Ma,[(0,s._)("fieldset",Ka,[Oa,(0,s._)("ul",Wa,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.product.colors,(e=>((0,s.wg)(),(0,s.iD)("li",{class:"colors__item",key:e.id},[(0,s._)("label",qa,[(0,s.wy)((0,s._)("input",{class:"colors__radio sr-only",type:"radio",name:"color",value:e.color.id,checked:l.activeColorId===e.color.id,"onUpdate:modelValue":t[1]||(t[1]=e=>l.activeColorId=e)},null,8,ja),[[r.G2,l.activeColorId]]),(0,s._)("span",{class:"colors__value",style:(0,m.j5)({"background-color":e.color.code})},null,4)])])))),128))])]),(0,s._)("fieldset",Za,[Ha,(0,s._)("label",Ya,[(0,s.wy)((0,s._)("select",{class:"form__select",type:"text",name:"category","onUpdate:modelValue":t[2]||(t[2]=e=>l.activeSizeId=e)},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.product.sizes,(e=>((0,s.wg)(),(0,s.iD)("option",{value:e.id,key:e.id},(0,m.zw)(e.title),9,Ba)))),128))],512),[[r.bM,l.activeSizeId]])])])]),(0,s._)("button",{class:"item__button button button--primery",type:"submit",disabled:o.isSending,onClick:t[3]||(t[3]=(0,r.iM)(((...e)=>l.addToCart&&l.addToCart(...e)),["prevent"]))}," В корзину ",8,Qa),o.isSending?((0,s.wg)(),(0,s.iD)("p",Ra,"Добавляем товар в корзину...")):(0,s.kq)("",!0),o.isSendingFailed?((0,s.wg)(),(0,s.iD)("p",Ga,"Произошла ошибка при добавлении товара в корзину. Попробуйте ещё раз!")):o.isAdded?((0,s.wg)(),(0,s.iD)("p",Na,"Товар успешно добавлен в корзину!")):(0,s.kq)("",!0)])])]),(0,s._)("div",Ja,[(0,s._)("ul",Xa,[(0,s._)("li",er,[(0,s._)("a",{class:(0,m.C_)(["tabs__link",{"tabs__link--current":"base-item-content"===o.selectedTab}]),onClick:t[4]||(t[4]=e=>l.setSelectedComponent("base-item-content"))}," Информация о товаре ",2)]),(0,s._)("li",tr,[(0,s._)("a",{class:(0,m.C_)(["tabs__link",{"tabs__link--current":"base-item-delivery"===o.selectedTab}]),onClick:t[5]||(t[5]=e=>l.setSelectedComponent("base-item-delivery"))}," Доставка и возврат ",2)])]),((0,s.wg)(),(0,s.j4)((0,s.LL)(o.selectedTab)))])])]))}const rr={class:"item__content"},sr=(0,s.uE)("<h3>Состав:</h3><p> 60% хлопок<br> 30% полиэстер<br></p><h3>Уход:</h3><p> Машинная стирка при макс. 30ºC короткий отжим<br> Гладить при макс. 110ºC<br> Не использовать машинную сушку<br> Отбеливать запрещено<br> Не подвергать химчистке<br></p>",4),ir=[sr];function or(e,t){return(0,s.wg)(),(0,s.iD)("div",rr,ir)}const lr={},nr=(0,v.Z)(lr,[["render",or]]);var cr=nr;const dr={class:"item__content"},ur=(0,s.uE)("<h3>Оплата товара:</h3><p> Оплата возможно несколькими способами. При замере покупатель может внести часть суммы заказа, но не менее 70%. Оставшуюся часть вносят после монтажа Вашего изделия. Оплата производится наличным платежом. Другой вариант: перечислением по безналичному расчету всей суммы заказа банковским переводом или банковской картой по номеру заказа у нас на сайте. </p><h3>Доставка и Приемка товара:</h3><p> Мы осуществляем доставку товара собственной службой доставки в согласованное с Вами время. Период доставки с 10.00 до 19.00. Доставка в праздничные и выходные дни согласовывается с менеджером вашего заказа.<br> При приемке товара необходимо в присутствии водителя-экспедитора (монтажника):<br> Совершить все необходимые действия, обеспечивающие принятие товаров - принятые покупателем (получателем) товары должны быть им осмотрены, проверены количество и качество.<br> После совершения указанных действий Покупатель (получатель) либо расписывается в графе: &quot;Заказ принял, комплектность полная, услуги по доставке оказаны, претензий к количеству и внешнему виду товара не имею. С условиями возврата товара ознакомлен&quot;. После получения заказа претензии к внешним дефектам товара, его количеству, комплектности и товарному виду не принимаются, либо составляет акт о выявленных недостатках в двух экземплярах. Ставя свою подпись, Покупатель (получатель) подтверждает, что он является уполномоченным на получение товара лицом.<br> В случае если товар привезен не в полном объеме, присутствует пересорт, бой или брак, довоз товара производится за счет продавца в согласованный сторонами срок при наличии товара на складе или в срок 2-3 рабочих дня после поступления заказного товара на склад, в случае его отсутствия.<br></p><h3>Условия возврата товара надлежащего качества:</h3><p> Возврат товара надлежащего качества, приобретённого через наш интернет-магазин, возможен в случае, если он не был в употреблении, имеются заводские ярлыки, бирки и т.п., сохранены его товарный вид, потребительские свойства, а также документ, подтверждающий факт и условия покупки указанного товара.<br> Не подлежат возврату товары, входящие в перечень непродовольственных товаров надлежащего качества, не подходящих возврату или обмену на аналогичный товар других размера, формы, габарита, фасона, расцветки или комплектации.<br> Покупатель вправе отказаться от товара, приобретенного через наш интернет-магазин, после его передачи в течение 7 дней (согласно Закону РФ &quot;О защите прав потребителей&quot;, статьи 26.1 о Дистанционном способе продаже товаров).<br> Для возврата товара необходим документ, удостоверяющий личность (паспорт гражданина РФ/загранпаспорт, временное удостоверение личности гражданина РФ, выдаваемое на период оформления паспорта).<br></p>",6),_r=[ur];function mr(e,t){return(0,s.wg)(),(0,s.iD)("div",dr,_r)}const pr={},gr=(0,v.Z)(pr,[["render",mr]]);var hr=gr,fr={components:{BaseItemCounter:sa,BaseItemContent:cr,BaseItemDelivery:hr},data(){return{productAmount:1,isLoading:!1,isLoadingFailed:!1,isSending:!1,isSendingFailed:!1,isAdded:!1,productData:null,activeColorIdx:0,activeSizeIdx:0,selectedTab:"base-item-content"}},computed:{product(){return console.log(this.productData),{...this.productData,gallery:this.productData.colors.map((e=>({id:e.color.id,image:e.gallery?e.gallery[0].file.url:"https://westsiderc.org/wp-content/uploads/2019/08/Image-Not-Available.png"})))}},gallery(){return this.product.gallery},activeColorId:{get(){return this.gallery[this.activeColorIdx].id},set(e){const t=this.gallery.findIndex((t=>t.id===e));this.activeColorIdx=t}},activeSizeId:{get(){return this.product.sizes[this.activeSizeIdx].id},set(e){const t=this.product.sizes.findIndex((t=>t.id===e));this.activeSizeIdx=t}}},methods:{async loadProduct(){this.isLoading=!0,this.isLoadingFailed=!1;try{const{data:e}=await Qt().get(`${Rt}/products/${this.$route.params.id}`);console.log(e),this.productData=e}catch(e){this.isLoading=!1,this.isLoadingFailed=!0}this.isLoading=!1},setItemAmount(e){this.productAmount=e},changeImg(e){const t=this.gallery.findIndex((t=>t.id===e));this.activeColorIdx=t},async addToCart(){this.isSending=!0,this.isAdded=!1,this.isSendingFailed=!1;try{await this.$store.dispatch("addToCart",{productId:this.product.id,colorId:this.activeColorId,sizeId:this.activeSizeId,quantity:this.productAmount})}catch(e){this.isSendingFailed=!0}this.isSending=!1,this.isAdded=!0},setSelectedComponent(e){this.selectedTab=e}},created(){this.loadProduct()}};const yr=(0,v.Z)(fr,[["render",ar]]);var br=yr;const vr={class:"content container"},wr={class:"content__top"},kr={class:"breadcrumbs"},Ir={class:"breadcrumbs__item"},Dr=(0,s.Uk)(" Каталог "),Cr={class:"breadcrumbs__item"},Fr=(0,s.Uk)(" Корзина "),Pr=(0,s._)("li",{class:"breadcrumbs__item"},[(0,s._)("a",{class:"breadcrumbs__link"}," Оформление заказа ")],-1),$r=(0,s._)("div",{class:"content__row"},[(0,s._)("h1",{class:"content__title"}," Оформление заказа ")],-1),Lr={class:"cart"},Ar={key:0,class:"loader-wrapper"},zr={key:1,class:"cart__field"},Sr={class:"cart__data"},Tr={key:0,class:"cart__options"},Vr={class:"loader-wrapper"},xr={key:1,class:"cart__options"},Ur=(0,s._)("h2",null,"Возникла ошибка при загрузке товаров. Попробуйте позже.",-1),Er=[Ur],Mr={key:2,class:"cart__options"},Kr=(0,s._)("h3",{class:"cart__title"},"Доставка",-1),Or={class:"cart__options options"},Wr={key:0,class:"form__error"},qr=(0,s._)("h3",{class:"cart__title"},"Оплата",-1),jr={class:"cart__options options"},Zr={key:1,class:"form__error"},Hr={class:"cart__block"},Yr={class:"cart__orders"},Br={class:"cart__total"},Qr=(0,s.Uk)("Доставка: "),Rr=(0,s.Uk)("Итого: "),Gr=(0,s.Uk)(" товара на сумму "),Nr=["disabled"],Jr={key:2,class:"cart__error form__error-block"},Xr=(0,s._)("h4",null,"Заявка не отправлена!",-1);function es(e,t,a,i,o,l){const n=(0,s.up)("router-link"),c=(0,s.up)("base-loader"),d=(0,s.up)("base-form-text-field"),u=(0,s.up)("base-form-textarea"),_=(0,s.up)("base-form-radio-delivery"),p=(0,s.up)("base-form-radio-payment");return(0,s.wg)(),(0,s.iD)("main",vr,[(0,s._)("div",wr,[(0,s._)("ul",kr,[(0,s._)("li",Ir,[(0,s.Wm)(n,{class:"breadcrumbs__link",to:{name:"main"}},{default:(0,s.w5)((()=>[Dr])),_:1})]),(0,s._)("li",Cr,[(0,s.Wm)(n,{class:"breadcrumbs__link",to:{name:"cart"}},{default:(0,s.w5)((()=>[Fr])),_:1})]),Pr]),$r]),(0,s._)("section",Lr,[(0,s._)("form",{class:"cart__form form",action:"#",method:"POST",onSubmit:t[7]||(t[7]=(0,r.iM)(((...e)=>l.sendOrder&&l.sendOrder(...e)),["prevent"]))},[l.isSending?((0,s.wg)(),(0,s.iD)("div",Ar,[(0,s.Wm)(c)])):((0,s.wg)(),(0,s.iD)("div",zr,[(0,s._)("div",Sr,[(0,s.Wm)(d,{title:"ФИО",placeholder:"Введите ваше имя",error:l.formError.name,modelValue:o.formData.name,"onUpdate:modelValue":t[0]||(t[0]=e=>o.formData.name=e)},null,8,["error","modelValue"]),(0,s.Wm)(d,{title:"Адрес доставки",placeholder:"Введите ваш адрес",error:l.formError.address,modelValue:o.formData.address,"onUpdate:modelValue":t[1]||(t[1]=e=>o.formData.address=e)},null,8,["error","modelValue"]),(0,s.Wm)(d,{title:"Телефон",placeholder:"Введите ваш телефон",error:l.formError.phone,modelValue:o.formData.phone,"onUpdate:modelValue":t[2]||(t[2]=e=>o.formData.phone=e)},null,8,["error","modelValue"]),(0,s.Wm)(d,{title:"Email",placeholder:"Введите ваш Email",error:l.formError.email,modelValue:o.formData.email,"onUpdate:modelValue":t[3]||(t[3]=e=>o.formData.email=e)},null,8,["error","modelValue"]),(0,s.Wm)(u,{title:"Комментарии к заказу",placeholder:"Ваши пожелания",error:l.formError.comments,modelValue:o.formData.comments,"onUpdate:modelValue":t[4]||(t[4]=e=>o.formData.comments=e)},null,8,["error","modelValue"])]),l.isLoading?((0,s.wg)(),(0,s.iD)("div",Tr,[(0,s._)("div",Vr,[(0,s.Wm)(c)])])):l.isLoadingFailed?((0,s.wg)(),(0,s.iD)("div",xr,Er)):((0,s.wg)(),(0,s.iD)("div",Mr,[Kr,(0,s._)("ul",Or,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.deliveries,(e=>((0,s.wg)(),(0,s.j4)(_,{key:e.id,group:"delivery",value:e.id,title:e.title,price:e.price,modelValue:o.formData.deliveryId,"onUpdate:modelValue":t[5]||(t[5]=e=>o.formData.deliveryId=e)},null,8,["value","title","price","modelValue"])))),128))]),l.formError.deliveryTypeId?((0,s.wg)(),(0,s.iD)("span",Wr,(0,m.zw)(l.formError.deliveryTypeId),1)):(0,s.kq)("",!0),qr,(0,s._)("ul",jr,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.payments,(e=>((0,s.wg)(),(0,s.j4)(p,{key:e.id,group:"pay",title:e.title,value:e.id,modelValue:o.formData.paymentId,"onUpdate:modelValue":t[6]||(t[6]=e=>o.formData.paymentId=e)},null,8,["title","value","modelValue"])))),128))]),l.formError.paymentTypeId?((0,s.wg)(),(0,s.iD)("span",Zr,(0,m.zw)(l.formError.paymentTypeId),1)):(0,s.kq)("",!0)]))])),(0,s._)("div",Hr,[(0,s._)("ul",Yr,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.cart,(e=>((0,s.wg)(),(0,s.iD)("li",{class:"cart__order",key:e.id},[(0,s._)("h3",null,(0,m.zw)(e.product.title),1),(0,s._)("b",null,(0,m.zw)(e.product.price)+" ₽",1),(0,s._)("span",null,"Артикул: "+(0,m.zw)(e.product.id),1)])))),128))]),(0,s._)("div",Br,[(0,s._)("p",null,[Qr,(0,s._)("b",null,(0,m.zw)(l.deliveryPrice?`${l.deliveryPrice} ₽`:"бесплатно"),1)]),(0,s._)("p",null,[Rr,(0,s._)("b",null,(0,m.zw)(l.totalQuantity),1),Gr,(0,s._)("b",null,(0,m.zw)(l.totalPrice)+" ₽",1)])]),(0,s._)("button",{class:"cart__button button button--primery",type:"submit",disabled:l.isLoading||l.isLoadingFailed}," Оформить заказ ",8,Nr)]),l.orderErrorMessage?((0,s.wg)(),(0,s.iD)("div",Jr,[Xr,(0,s._)("p",null,(0,m.zw)(l.orderErrorMessage||"Похоже произошла ошибка. Попробуйте отправить снова или перезагрузите страницу."),1)])):(0,s.kq)("",!0)],32)])])}const ts=["placeholder"];function as(e,t,a,i,o,l){const n=(0,s.up)("base-form-field");return(0,s.wg)(),(0,s.j4)(n,{title:e.title,error:e.error},{default:(0,s.w5)((()=>[(0,s.wy)((0,s._)("input",{class:"form__input",type:"text",name:"name",placeholder:e.placeholder,"onUpdate:modelValue":t[0]||(t[0]=t=>e.value=t)},null,8,ts),[[r.nr,e.value]])])),_:1},8,["title","error"])}const rs={class:"form__label"},ss={class:"form__value"},is={key:0,class:"form__error"};function os(e,t,a,r,i,o){return(0,s.wg)(),(0,s.iD)("label",rs,[(0,s.WI)(e.$slots,"default"),(0,s._)("span",ss,(0,m.zw)(a.title),1),a.error?((0,s.wg)(),(0,s.iD)("span",is,(0,m.zw)(a.error),1)):(0,s.kq)("",!0)])}var ls={props:["title","error"]};const ns=(0,v.Z)(ls,[["render",os]]);var cs=ns,ds={components:{BaseFormField:cs},emits:["update:modelValue"],props:["title","error","placeholder","modelValue"],computed:{value:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}}},us={mixins:[ds]};const _s=(0,v.Z)(us,[["render",as]]);var ms=_s;const ps=["placeholder"];function gs(e,t,a,i,o,l){const n=(0,s.up)("base-form-field");return(0,s.wg)(),(0,s.j4)(n,{title:e.title,error:e.error},{default:(0,s.w5)((()=>[(0,s.wy)((0,s._)("textarea",{class:"form__input form__input--area",name:"comments",placeholder:e.placeholder,"onUpdate:modelValue":t[0]||(t[0]=t=>e.value=t)},null,8,ps),[[r.nr,e.value]])])),_:1},8,["title","error"])}var hs={mixins:[ds]};const fs=(0,v.Z)(hs,[["render",gs]]);var ys=fs;const bs={class:"options__value"};function vs(e,t,a,r,i,o){const l=(0,s.up)("base-form-radio");return(0,s.wg)(),(0,s.j4)(l,{group:a.group},{default:(0,s.w5)((()=>[(0,s._)("span",bs,[(0,s.Uk)((0,m.zw)(a.title)+" ",1),(0,s._)("b",null,(0,m.zw)(+a.price?`${a.price} ₽`:"бесплатно"),1)])])),_:1},8,["group"])}const ws={class:"options__item"},ks={class:"options__label"},Is=["name","value"];function Ds(e,t,a,i,o,l){return(0,s.wg)(),(0,s.iD)("li",ws,[(0,s._)("label",ks,[(0,s.wy)((0,s._)("input",{class:"options__radio sr-only",type:"radio",name:e.group,value:e.value,"onUpdate:modelValue":t[0]||(t[0]=t=>e.dataValue=t)},null,8,Is),[[r.G2,e.dataValue]]),(0,s.WI)(e.$slots,"default")])])}var Cs={emits:["update:modelValue"],props:["modelValue","value","group","error"],computed:{dataValue:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}}},Fs={mixins:[Cs]};const Ps=(0,v.Z)(Fs,[["render",Ds]]);var $s=Ps,Ls={components:{BaseFormRadio:$s},props:["title","price","group"]};const As=(0,v.Z)(Ls,[["render",vs]]);var zs=As;const Ss={class:"options__value"};function Ts(e,t,a,r,i,o){const l=(0,s.up)("base-form-radio");return(0,s.wg)(),(0,s.j4)(l,{group:a.group},{default:(0,s.w5)((()=>[(0,s._)("span",Ss,(0,m.zw)(a.title),1)])),_:1},8,["group"])}var Vs={components:{BaseFormRadio:$s},props:["title","group"]};const xs=(0,v.Z)(Vs,[["render",Ts]]);var Us=xs,Es={components:{BaseFormTextField:ms,BaseFormTextarea:ys,BaseFormRadioDelivery:zs,BaseFormRadioPayment:Us},data(){return{formData:{name:null,address:null,phone:null,email:null,comments:null,paymentId:1,deliveryId:1}}},computed:{cart(){return this.$store.state.cartProductsData},totalPrice(){return this.$store.getters.cartTotalPrice+this.deliveryPrice},totalQuantity(){return this.$store.getters.cartTotalQuantity},payments(){return this.$store.state.paymentsData},deliveries(){return this.$store.state.deliveriesData},deliveryPrice(){return this.deliveries?+this.deliveries.find((e=>e.id===this.formData.deliveryId)).price:0},formError(){return this.$store.state.orderErrorInfo||{}},formErrorMessage(){return this.$store.state.formErrorMessage},orderErrorMessage(){return this.$store.state.orderErrorMessage},isSending(){return this.$store.state.isSending},isSendingFailed(){return this.$store.state.isSendingFailed},isLoading(){return this.$store.state.isLoading},isLoadingFailed(){return this.$store.state.isLoadingFailed}},methods:{sendOrder(){this.$store.dispatch("sendOrder",{name:this.formData.name,address:this.formData.address,phone:this.formData.phone,email:this.formData.email,deliveryTypeId:this.formData.deliveryId,paymentTypeId:this.formData.paymentId,comments:this.formData.comments})},loadPayments(){this.$store.dispatch("loadPayments",{deliveryTypeId:this.formData.deliveryId})}},watch:{"formData.deliveryId"(){this.loadPayments(),this.formData.paymentId=null}},created(){this.$store.dispatch("loadDeliveries"),this.loadPayments()}};const Ms=(0,v.Z)(Es,[["render",es]]);var Ks=Ms;const Os={key:0,class:"content container"},Ws={class:"loader-wrapper"},qs={key:1,class:"content container"},js=(0,s._)("h1",null,"Произошла ошибка при загрузке корзины. Попробуйте ещё раз!",-1),Zs=[js],Hs={key:2,class:"content container"},Ys={class:"content__top"},Bs={class:"breadcrumbs"},Qs={class:"breadcrumbs__item"},Rs=(0,s.Uk)(" Каталог "),Gs=(0,s._)("li",{class:"breadcrumbs__item"},[(0,s._)("a",{class:"breadcrumbs__link",to:{name:"cart"}}," Корзина ")],-1),Ns=(0,s._)("li",{class:"breadcrumbs__item"},[(0,s._)("a",{class:"breadcrumbs__link"}," Оформление заказа ")],-1),Js={class:"content__title"},Xs=(0,s.Uk)(" Заказ оформлен "),ei={class:"cart"},ti={class:"cart__form form",action:"#",method:"POST"},ai={class:"cart__field"},ri=(0,s._)("p",{class:"cart__message"}," Благодарим за выбор нашего магазина. На Вашу почту придет письмо с деталями заказа. Наши менеджеры свяжутся с Вами в течение часа для уточнения деталей доставки. ",-1),si={class:"dictionary"},ii={class:"dictionary__item"},oi=(0,s._)("span",{class:"dictionary__key"}," Получатель ",-1),li={class:"dictionary__value"},ni={class:"dictionary__item"},ci=(0,s._)("span",{class:"dictionary__key"}," Адрес доставки ",-1),di={class:"dictionary__value"},ui={class:"dictionary__item"},_i=(0,s._)("span",{class:"dictionary__key"}," Телефон ",-1),mi={class:"dictionary__value"},pi={class:"dictionary__item"},gi=(0,s._)("span",{class:"dictionary__key"}," Email ",-1),hi={class:"dictionary__value"},fi={class:"dictionary__item"},yi=(0,s._)("span",{class:"dictionary__key"}," Способ оплаты ",-1),bi={class:"dictionary__value"},vi={class:"cart__block"},wi={class:"cart__orders"},ki={class:"cart__total"},Ii=(0,s.Uk)("Доставка: "),Di=(0,s.Uk)("Итого: "),Ci=(0,s.Uk)(" товара на сумму ");function Fi(e,t,a,r,i,o){const l=(0,s.up)("base-loader"),n=(0,s.up)("router-link");return o.isLoading?((0,s.wg)(),(0,s.iD)("main",Os,[(0,s._)("div",Ws,[(0,s.Wm)(l)])])):o.isLoadingFailed?((0,s.wg)(),(0,s.iD)("main",qs,Zs)):((0,s.wg)(),(0,s.iD)("main",Hs,[(0,s._)("div",Ys,[(0,s._)("ul",Bs,[(0,s._)("li",Qs,[(0,s.Wm)(n,{class:"breadcrumbs__link",to:{name:"main"}},{default:(0,s.w5)((()=>[Rs])),_:1})]),Gs,Ns]),(0,s._)("h1",Js,[Xs,(0,s._)("span",null,"№ "+(0,m.zw)(o.orderInfo.id),1)])]),(0,s._)("section",ei,[(0,s._)("form",ti,[(0,s._)("div",ai,[ri,(0,s._)("ul",si,[(0,s._)("li",ii,[oi,(0,s._)("span",li,(0,m.zw)(o.orderInfo.name),1)]),(0,s._)("li",ni,[ci,(0,s._)("span",di,(0,m.zw)(o.orderInfo.address),1)]),(0,s._)("li",ui,[_i,(0,s._)("span",mi,(0,m.zw)(o.orderInfo.phone),1)]),(0,s._)("li",pi,[gi,(0,s._)("span",hi,(0,m.zw)(o.orderInfo.email),1)]),(0,s._)("li",fi,[yi,(0,s._)("span",bi,(0,m.zw)(o.orderInfo.paymentType),1)])])]),(0,s._)("div",vi,[(0,s._)("ul",wi,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.orderInfo.basket.items,(e=>((0,s.wg)(),(0,s.iD)("li",{class:"cart__order",key:e.id},[(0,s._)("h3",null,(0,m.zw)(e.product.title),1),(0,s._)("b",null,(0,m.zw)(e.product.price)+" ₽",1),(0,s._)("span",null,"Артикул: "+(0,m.zw)(e.product.id),1)])))),128))]),(0,s._)("div",ki,[(0,s._)("p",null,[Ii,(0,s._)("b",null,(0,m.zw)(+o.orderInfo.deliveryType.price?`${o.orderInfo.deliveryType.price} ₽`:"бесплатно"),1)]),(0,s._)("p",null,[Di,(0,s._)("b",null,(0,m.zw)(o.orderInfo.basket.items.length),1),Ci,(0,s._)("b",null,(0,m.zw)(o.orderInfo.totalPrice)+" ₽",1)])])])])])]))}var Pi={computed:{orderInfo(){return this.$store.state.orderInfo},isLoading(){return this.$store.state.isLoading},isLoadingFailed(){return this.$store.state.isLoadingFailed}},created(){this.$store.dispatch("loadOrderInfo",this.$route.params.id)}};const $i=(0,v.Z)(Pi,[["render",Fi]]);var Li=$i;function Ai(e,t){return(0,s.wg)(),(0,s.iD)("h1",null,"Страница не найдена. Попробуйте поискать что-нибудь другое.")}const zi={},Si=(0,v.Z)(zi,[["render",Ai]]);var Ti=Si;const Vi=[{path:"/",name:"main",component:ct},{path:"/cart",name:"cart",component:da},{path:"/product/:id",name:"product",component:br},{path:"/order",name:"order",component:Ks},{path:"/order/:id",name:"orderInfo",component:Li},{path:"/notFound(.*)*",name:"notfound",component:Ti}],xi=(0,U.p7)({history:(0,U.r5)(),routes:Vi});var Ui=xi,Ei={cart(e){return e.cartData.map((t=>{const a=e.cartProductsData.find((e=>e.product.id===t.productId));return{...a,...t}}))},cartTotalPrice(e,t){return t.cart.reduce(((e,t)=>e+t.price*t.quantity),0)},cartTotalQuantity(e,t){return t.cart.length}},Mi={setProducts(e,t){e.productsData=t},setProductData(e,t){e.productData=t},setCategories(e,t){e.categoriesData=t},setColors(e,t){e.colorsData=t},setMaterials(e,t){e.materialsData=t},setSeasons(e,t){e.seasonsData=t},setDeliveries(e,t){e.deliveriesData=t},setPayments(e,t){e.paymentsData=t},updateAccessKey(e,t){e.userAccessKey=t},syncCartProducts(e){e.cartData=e.cartProductsData.map((e=>({productId:e.product.id,quantity:e.quantity})))},updateCart(e,t){e.cartProductsData=t},updateCartProductQuantity(e,t){const a=e.cartData.find((e=>e.productId===t.productId));a&&(a.quantity=t.quantity)},deleteCartProduct(e,t){e.cartData=e.cartData.filter((e=>e.productId!==t.productId))},resetCart(e){e.cartProductsData=[],e.cartData=[]},updateOrderInfo(e,t){e.orderInfo=t},updateOrderError(e,t){e.orderErrorInfo=t},resetOrderError(e){e.orderErrorInfo=null},resetFormErrorMessage(e){e.formErrorMessage=null},updateOrderErrorMessage(e,t){e.orderErrorMessage=t}},Ki={async loadProducts(e,t){e.state.isLoading=!0,e.state.isLoadingFailed=!1;try{const{data:a}=await Qt().get(`${Rt}/products`,{params:t});e.commit("setProducts",a)}catch(a){e.state.isLoadingFailed=!0,e.state.isLoading=!1}finally{e.state.isLoading=!1}},async loadFilters(e){e.state.areFiltersLoading=!0,e.state.areFiltersLoadingFailed=!1;try{const t=await Qt().get(`${Rt}/productCategories`);e.commit("setCategories",t.data.items);const a=await Qt().get(`${Rt}/colors`);e.commit("setColors",a.data.items);const r=await Qt().get(`${Rt}/materials`);e.commit("setMaterials",r.data.items);const s=await Qt().get(`${Rt}/seasons`);e.commit("setSeasons",s.data.items)}catch(t){e.state.areFiltersLoadingFailed=!0}finally{e.state.areFiltersLoading=!1}},async loadDeliveries(e){const{data:t}=await Qt().get(`${Rt}/deliveries`);e.commit("setDeliveries",t)},async loadPayments(e,t){e.state.isLoading=!0,e.state.isLoadingFailed=!1;try{const{data:a}=await Qt().get(`${Rt}/payments`,{params:t});e.commit("setPayments",a)}catch(a){e.state.isLoadingFailed=!0}finally{e.state.isLoading=!1}},async addToCart(e,t){e.state.isSending=!0,e.state.isSendingFailed=!1,e.state.isAdded=!1;try{const{data:a}=await Qt().post(`${Rt}/baskets/products`,t,{params:{userAccessKey:e.state.userAccessKey}});e.commit("updateCart",a.items),e.commit("syncCartProducts")}catch(a){e.state.isSendingFailed=!0}e.state.isSending=!1,e.state.isAdded=!0},async loadCart(e){e.state.isCartLoading=!0,e.state.isCartLoadingFailed=!1;try{const{data:t}=await Qt().get(`${Rt}/baskets`,{params:{userAccessKey:e.state.userAccessKey}});e.state.userAccessKey||(localStorage.setItem("userAccessKey",t.user.accessKey),e.commit("updateAccessKey",t.user.accessKey)),e.commit("updateCart",t.items),e.commit("syncCartProducts")}catch(t){e.state.isCartLoadingFailed=!0}finally{e.state.isCartLoading=!1}},async deleteFromCart(e,t){e.commit("deleteCartProduct",{productId:t.productId});try{const{data:a}=await Qt()["delete"](`${Rt}/baskets/products`,{params:{userAccessKey:e.state.userAccessKey},data:t});e.commit("updateCart",a.items)}catch(a){e.commit("syncCartProducts")}},async sendOrder(e,t){e.state.isSending=!0,e.state.isSendingFailed=!1;try{e.commit("resetOrderError"),e.commit("resetFormErrorMessage");const{data:a}=await Qt().post(`${Rt}/orders`,t,{params:{userAccessKey:e.state.userAccessKey}});e.commit("updateOrderInfo",a),e.commit("resetCart"),Ui.push({name:"orderInfo",params:{id:a.id}})}catch(a){e.state.isSendingFailed=!0,e.commit("updateOrderError",a.response.data.error.request),e.commit("updateOrderErrorMessage",a.response.data.error.message)}finally{e.state.isSending=!1}},async loadOrderInfo(e,t){e.state.isLoading=!0,e.state.isLoadingFailed=!1;try{const{data:a}=await Qt().get(`${Rt}/orders/${t}`,{params:{userAccessKey:e.state.userAccessKey}});e.commit("updateOrderInfo",a)}catch(a){e.state.isLoadingFailed=!0}finally{e.state.isLoading=!1}}},Oi=(0,o.MT)({state:{productsData:null,productData:null,categoriesData:null,colorsData:null,materialsData:null,seasonsData:null,deliveriesData:null,paymentsData:null,areFiltersLoading:!1,areFiltersLoadingFailed:!1,userAccessKey:null,isLoading:!1,isLoadingFailed:!1,isSending:!1,isSendingFailed:!1,cartData:[],cartProductsData:[],cartError:null,isCartLoading:!1,isCartLoadingFailed:!1,orderInfo:null,orderErrorInfo:null,orderErrorMessage:null,formErrorMessage:null},getters:Ei,mutations:Mi,actions:Ki});function Wi(e,t,a,r,i,o){return(0,s.wg)(),(0,s.iD)("div",{class:(0,m.C_)(["loader",a.size])},null,2)}var qi={props:["size"]};const ji=(0,v.Z)(qi,[["render",Wi]]);var Zi=ji;const Hi=(0,r.ri)(x);Hi.use(Oi),Hi.use(Ui),Hi.component("base-loader",Zi),Hi.mount("#app")}},t={};function a(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,a),i.exports}a.m=e,function(){var e=[];a.O=function(t,r,s,i){if(!r){var o=1/0;for(d=0;d<e.length;d++){r=e[d][0],s=e[d][1],i=e[d][2];for(var l=!0,n=0;n<r.length;n++)(!1&i||o>=i)&&Object.keys(a.O).every((function(e){return a.O[e](r[n])}))?r.splice(n--,1):(l=!1,i<o&&(o=i));if(l){e.splice(d--,1);var c=s();void 0!==c&&(t=c)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[r,s,i]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,r){var s,i,o=r[0],l=r[1],n=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(s in l)a.o(l,s)&&(a.m[s]=l[s]);if(n)var d=n(a)}for(t&&t(r);c<o.length;c++)i=o[c],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(d)},r=self["webpackChunkmoire"]=self["webpackChunkmoire"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=a.O(void 0,[998],(function(){return a(7042)}));r=a.O(r)})();
//# sourceMappingURL=app.abec8cf7.js.map